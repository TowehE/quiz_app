services:
  - type: web
    name: quiz-app
    runtime: docker 
    region: oregon
    startCommand: ./start.sh 

    envVars:
      - key: APP_KEY
        value: base64:Hyz0nDPdm9PyqYzmDqVnjYMtorqxEFPxACeMBPjVo88=

      - key: APP_ENV
        value: production

      - key: APP_DEBUG
        value: 'false'

      # CRITICAL: Force PostgreSQL connection
      - key: DB_CONNECTION
        value: pgsql
        
      - key: DB_HOST
        value: aws-1-eu-north-1.pooler.supabase.com
        
      - key: DB_PORT
        value: '6543'
        
      - key: DB_DATABASE
        value: postgres
        
      - key: DB_USERNAME
        value: postgres.xvuzwamukjvrnwengddk
        
      - key: DB_PASSWORD
        sync: false  # Set this manually in Render dashboard
      
      # Mail Configuration
      - key: MAIL_MAILER
        value: smtp
        
      - key: MAIL_HOST
        value: smtp.gmail.com
        
      - key: MAIL_PORT
        value: '587'
        
      - key: MAIL_USERNAME
        value: toweh02@gmail.com
        
      - key: MAIL_PASSWORD
        sync: false  
        
      - key: MAIL_ENCRYPTION
        value: tls
        
      - key: MAIL_FROM_ADDRESS
        value: toweh02@gmail.com
        
      - key: MAIL_FROM_NAME
        value: Domtrade
      
      - key: SESSION_DRIVER
        value: file
        
      - key: QUEUE_CONNECTION
        value: database
        
      - key: CACHE_STORE
        value: file  # Changed from database to file