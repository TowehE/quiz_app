services:
  - type: web
    name: quiz-app
    runtime: docker 
    region: oregon
    startCommand: ./start.sh 

    envVars:
      - key: APP_KEY
        generateValue: true 

      - key: APP_ENV
        value: production

      - key: APP_DEBUG
        value: 'false'

      # PostgreSQL Configuration (credentials auto-injected by Render)
      - key: DB_CONNECTION
        value: pgsql
        
      - key: DATABASE_URL
        fromDatabase:
          name: quiz-db
          property: connectionString
      
      # Mail Configuration (set all sensitive values in Render dashboard)
      - key: MAIL_MAILER
        value: smtp
        
      - key: MAIL_HOST
        value: smtp.gmail.com
        
      - key: MAIL_PORT
        value: '587'
        
      - key: MAIL_USERNAME
        sync: false  
        
      - key: MAIL_PASSWORD
        sync: false  
        
      - key: MAIL_ENCRYPTION
        value: tls
        
      - key: MAIL_FROM_ADDRESS
        sync: false  
        
      - key: MAIL_FROM_NAME
        value: Domtrade
      
      - key: WEB_ROOT
        value: public
        
      - key: SESSION_DRIVER
        value: file
        
      - key: QUEUE_CONNECTION
        value: database
        
      - key: CACHE_STORE
        value: database